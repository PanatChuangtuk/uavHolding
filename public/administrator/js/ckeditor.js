import {
    ClassicEditor,
    Essentials,
    Paragraph,
    Heading,
    Bold,
    Italic,
    Underline,
    Strikethrough,
    BlockQuote,
    Link,
    Image,
    SourceEditing,
    ImageUpload,
    ImageInsert,
    ImageResizeEditing,
    ImageResizeHandles,
    ImageResize,
    ImageToolbar,
    ImageCaption,
    ImageStyle,
    Table,
    TableToolbar,
    List,
    Indent,
    IndentBlock,
    Alignment,
    FontColor,
    FontBackgroundColor,
    FontFamily,
    FontSize,
    Highlight,
    MediaEmbed,
    SelectAll,
    HorizontalLine,
    RemoveFormat,
    SpecialCharacters,
    SpecialCharactersEssentials,
    SimpleUploadAdapter,
    CodeBlock,
    ShowBlocks,
    TableCellProperties,
    TableProperties,
    GeneralHtmlSupport,
} from "ckeditor5";
document.addEventListener("DOMContentLoaded", function () {
    const textareas = document.querySelectorAll(".areaEditor");
    textareas.forEach((textarea) => {
        ClassicEditor.create(textarea, {
            fontSize: {
                options: [
                    "default",
                    6,
                    7,
                    8,
                    9,
                    10,
                    11,
                    12,
                    14,
                    18,
                    24,
                    36,
                    48,
                    60,
                    72,
                    96,
                ],
                supportAllValues: true,
            },
            image: {
                resizeUnit: "px",
                toolbar: [
                    "toggleImageCaption",
                    "imageTextAlternative",
                    "alignment",
                    "imageResize",
                    // "imageStyle:inline",
                    // "imageStyle:wrapText",
                    // "imageStyle:breakText",
                ],
                insert: {
                    type: "inline",
                },
            },

            table: {
                contentToolbar: [
                    "tableColumn",
                    "tableRow",
                    "mergeTableCells",
                    "tableProperties",
                    "tableCellProperties",
                ],
            },
            toolbar: {
                items: [
                    "sourceEditing",
                    "undo",
                    "redo",
                    "heading",
                    "|",
                    "bold",
                    "italic",
                    "underline",
                    "strikethrough",
                    "removeFormat",
                    "fontColor",
                    "fontBackgroundColor",
                    "fontFamily",
                    "fontSize",
                    "highlight",
                    "NumberedList",
                    "BulletedList",
                    "Outdent",
                    "Indent",
                    "Blockquote",
                    "horizontalLine",
                    "|",
                    "alignment",
                    "insertTable",
                    "codeBlock",
                    "|",
                    "insertImage",
                    "mediaEmbed",
                    "link",
                    "|",
                    "showBlocks",
                    "specialCharacters",
                    "selectAll",
                ],
                shouldNotGroupWhenFull: true,
            },
            htmlSupport: {
                allow: [
                    {
                        name: /.*/,
                        attributes: true,
                        classes: true,
                        styles: true,
                    },
                ],
                disallow: [
                    {
                        name: /.*/,
                        attributes: ["style"],
                        classes: ["aspect-ratio"],
                    },
                ],
            },
            plugins: [
                TableProperties,
                TableCellProperties,
                Essentials,
                ShowBlocks,
                SourceEditing,
                CodeBlock,
                SimpleUploadAdapter,
                Paragraph,
                Heading,
                Bold,
                Italic,
                Underline,
                Strikethrough,
                RemoveFormat,
                BlockQuote,
                ImageResizeEditing,
                ImageResizeHandles,
                Link,
                Image,
                ImageUpload,
                ImageInsert,
                ImageResize,
                ImageToolbar,
                ImageCaption,
                ImageStyle,
                Table,
                TableToolbar,
                List,
                Indent,
                IndentBlock,
                Alignment,
                FontColor,
                FontBackgroundColor,
                FontFamily,
                FontSize,
                Highlight,
                MediaEmbed,
                SelectAll,
                HorizontalLine,
                SpecialCharacters,
                SpecialCharactersEssentials,
                GeneralHtmlSupport,
            ],
            simpleUpload: {
                uploadUrl: `${window.location.origin}/administrator/ckeditor/upload?_token=${window.csrfToken}`,
            },
        })
            .then((editor) => {
                textarea.contentInstance = editor;
            })
            .catch((error) => {
                console.error(error);
            });
    });
});
